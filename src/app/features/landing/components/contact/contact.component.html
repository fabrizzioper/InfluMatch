<section class="contact-section" id="contact">
  <div class="container">
    <!-- Header -->
    <div class="section-header" data-aos="fade-up">
      <span class="overline">{{ "CONTACT.OVERLINE" | translate }}</span>
      <h2 class="section-title">{{ "CONTACT.TITLE" | translate }}</h2>
      <p class="section-subtitle">{{ "CONTACT.SUBTITLE" | translate }}</p>
    </div>

    <!-- Contact Content -->
    <div class="contact-content">
      <!-- Contact Form -->
      <div
        class="contact-form-container"
        data-aos="fade-up"
        data-aos-delay="100"
      >
        <div class="form-card">
          <h3>{{ "CONTACT.FORM_TITLE" | translate }}</h3>

          <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label for="name">{{ "CONTACT.NAME" | translate }}</label>
              <div class="input-container">
                <mat-icon>person</mat-icon>
                <input
                  type="text"
                  id="name"
                  formControlName="name"
                  [placeholder]="'CONTACT.NAME' | translate"
                />
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('name')?.invalid &&
                  contactForm.get('name')?.touched
                "
              >
                {{ "CONTACT.NAME_REQUIRED" | translate }}
              </div>
            </div>

            <div class="form-group">
              <label for="email">{{ "CONTACT.EMAIL" | translate }}</label>
              <div class="input-container">
                <mat-icon>email</mat-icon>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  [placeholder]="'CONTACT.EMAIL' | translate"
                />
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('email')?.hasError('required') &&
                  contactForm.get('email')?.touched
                "
              >
                {{ "CONTACT.EMAIL_REQUIRED" | translate }}
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('email')?.hasError('email') &&
                  contactForm.get('email')?.touched
                "
              >
                {{ "CONTACT.EMAIL_INVALID" | translate }}
              </div>
            </div>

            <div class="form-group">
              <label for="subject">{{ "CONTACT.SUBJECT" | translate }}</label>
              <div class="select-container">
                <mat-icon>subject</mat-icon>
                <select id="subject" formControlName="subject">
                  <option
                    *ngFor="let option of subjectOptions"
                    [value]="option.value"
                  >
                    {{ option.label | translate }}
                  </option>
                </select>
                <mat-icon class="dropdown-icon">expand_more</mat-icon>
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('subject')?.invalid &&
                  contactForm.get('subject')?.touched
                "
              >
                {{ "CONTACT.SUBJECT_REQUIRED" | translate }}
              </div>
            </div>

            <div class="form-group">
              <label for="message">{{ "CONTACT.MESSAGE" | translate }}</label>
              <div class="textarea-container">
                <mat-icon>message</mat-icon>
                <textarea
                  id="message"
                  formControlName="message"
                  rows="5"
                  [placeholder]="'CONTACT.MESSAGE' | translate"
                ></textarea>
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('message')?.hasError('required') &&
                  contactForm.get('message')?.touched
                "
              >
                {{ "CONTACT.MESSAGE_REQUIRED" | translate }}
              </div>
              <div
                class="error-message"
                *ngIf="
                  contactForm.get('message')?.hasError('minlength') &&
                  contactForm.get('message')?.touched
                "
              >
                {{ "CONTACT.MESSAGE_MINLENGTH" | translate }}
              </div>
            </div>

            <div class="form-actions">
              <button
                type="submit"
                class="submit-button"
                [disabled]="contactForm.invalid || isSubmitting"
              >
                <div class="button-content">
                  <span *ngIf="!isSubmitting">{{
                    "CONTACT.SUBMIT" | translate
                  }}</span>
                  <div *ngIf="isSubmitting" class="spinner"></div>
                </div>
              </button>
            </div>
          </form>

          <!-- Success Message -->
          <div
            *ngIf="formStatus === 'success'"
            class="form-success"
            data-aos="fade-up"
          >
            <div class="success-icon">
              <mat-icon>check_circle</mat-icon>
            </div>
            <h4>{{ "CONTACT.SUCCESS_TITLE" | translate }}</h4>
            <p>{{ "CONTACT.SUCCESS_MESSAGE" | translate }}</p>
          </div>

          <!-- Error Message -->
          <div
            *ngIf="formStatus === 'error'"
            class="form-error"
            data-aos="fade-up"
          >
            <div class="error-icon">
              <mat-icon>error</mat-icon>
            </div>
            <h4>{{ "CONTACT.ERROR_TITLE" | translate }}</h4>
            <p>{{ "CONTACT.ERROR_MESSAGE" | translate }}</p>
            <button class="try-again-button" (click)="formStatus = 'idle'">
              {{ "CONTACT.TRY_AGAIN" | translate }}
            </button>
          </div>
        </div>
      </div>

      <!-- Contact Info -->
      <div
        class="contact-info-container"
        data-aos="fade-up"
        data-aos-delay="200"
      >
        <div class="info-card">
          <div class="info-image">
            <img
              src="../../../../../assets/images/contact-image.png"
              alt="Contact Us"
            />
          </div>

          <div class="info-content">
            <h3>{{ "CONTACT.INFO_TITLE" | translate }}</h3>

            <div class="info-items">
              <div class="info-item">
                <div class="info-icon">
                  <mat-icon>location_on</mat-icon>
                </div>
                <div class="info-text">
                  <h4>{{ "CONTACT.ADDRESS_TITLE" | translate }}</h4>
                  <p>{{ "CONTACT.ADDRESS" | translate }}</p>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <mat-icon>email</mat-icon>
                </div>
                <div class="info-text">
                  <h4>{{ "CONTACT.EMAIL_TITLE" | translate }}</h4>
                  <p>
                    <a href="mailto:{{ 'CONTACT.EMAIL_ADDRESS' | translate }}">
                      {{ "CONTACT.EMAIL_ADDRESS" | translate }}
                    </a>
                  </p>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <mat-icon>phone</mat-icon>
                </div>
                <div class="info-text">
                  <h4>{{ "CONTACT.PHONE_TITLE" | translate }}</h4>
                  <p>
                    <a href="tel:{{ 'CONTACT.PHONE_NUMBER' | translate }}">
                      {{ "CONTACT.PHONE_NUMBER" | translate }}
                    </a>
                  </p>
                </div>
              </div>
            </div>

            <div class="social-links">
              <h4>{{ "CONTACT.SOCIAL_TITLE" | translate }}</h4>
              <div class="social-icons">
                <a href="#" class="social-icon" aria-label="Facebook">
                  <mat-icon>facebook</mat-icon>
                </a>
                <a href="#" class="social-icon" aria-label="Twitter">
                  <mat-icon>twitter</mat-icon>
                </a>
                <a href="#" class="social-icon" aria-label="Instagram">
                  <mat-icon>instagram</mat-icon>
                </a>
                <a href="#" class="social-icon" aria-label="LinkedIn">
                  <mat-icon>linkedin</mat-icon>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Map Section -->
    <div class="map-section" data-aos="fade-up">
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3024.2219901290355!2d-74.00369368400567!3d40.71312937933185!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c25a23e28c1191%3A0x49f75d3281df052a!2s150%20Park%20Row%2C%20New%20York%2C%20NY%2010007%2C%20USA!5e0!3m2!1sen!2sus!4v1652813158619!5m2!1sen!2sus"
          width="100%"
          height="450"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="contact-faq-section" data-aos="fade-up">
      <h3 class="faq-title">{{ "CONTACT.FAQ_TITLE" | translate }}</h3>

      <div class="faq-grid">
        <div
          class="faq-item"
          *ngFor="let faq of faqs; let i = index"
          [attr.data-aos]="'fade-up'"
          [attr.data-aos-delay]="i * 50"
        >
          <div class="faq-question" (click)="toggleFaq(i)">
            <h4>{{ faq.questionKey | translate }}</h4>
            <mat-icon>{{ faq.isOpen ? "remove" : "add" }}</mat-icon>
          </div>
          <div class="faq-answer" [class.open]="faq.isOpen">
            <p>{{ faq.answerKey | translate }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
